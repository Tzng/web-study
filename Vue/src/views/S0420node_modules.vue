<template>
    <div class="about">
        <h1>0420-node_modules</h1>
        <h3>dayjs</h3>
        <div>
            {{time}} - 是今年的第{{dayjs().dayOfYear()}}天
        </div>
        <div>
            7天后是{{dayjs().add(7, 'day').format('DD/MM/YYYY')}}
        </div>
        <div>地区数据</div>
        <div>
            <ul>
                <li v-for="item in areaList" :key="item.id">{{item.text}}</li>
            </ul>
        </div>
    </div>
</template>
<script setup lang="ts">
import dayjs from "dayjs";
import {onMounted, ref} from "vue";
import CommService from "@/service/CommService";
import {flatMap, isDate, min} from "lodash";

// 时间ref对象
const time = ref(dayjs().format('YYYY-MM-DD HH:mm:ss'));

// 实时更新数据
onMounted(() => {
    setInterval(() => {
        time.value = dayjs().format('YYYY-MM-DD HH:mm:ss');
    }, 1000);
    initData();
})

// 获取地区数据
const areaList = ref([]);

const initData = async () => {
    areaList.value = await CommService.areaListAxios();
}

function duplicate(n) {
    return [n, n + 2];
}


// 2023年5月25日22:11:24 - new Date();
function test1(v: string | Date){
    // 如果传递的是时间对象，就转成字符串
    if(v instanceof Date) {
        return v.toLocaleString();
    }
    if(isDate(v)){
        return dayjs(v).format('YYYY-MM-DD HH:mm:ss');
    }
}

const a = flatMap([1, 2], duplicate);
console.log('a', a)

const b = [1, 2].map(item => [item, item])
console.log('b', b)

const c = min([1, 2,34,5,6,7,8,2])

console.log('c', c)


</script>

<style>
h3 {
    margin: 10px;
}
</style>
